!function(a){if("function"==typeof define&&define.amd){define(["jquery"],a)}else{if("object"==typeof module&&module.exports){var b=require("jquery");a(b),module.exports=b}else{a(jQuery)}}}(function(a){function b(c){this.init(c)}b.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",insertMode:"prepend",constructor:b,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(c){a.extend(this,c),this.radius=this.size/2,this.initWidget(),this.initFill(),this.draw(),this.el.trigger("circle-inited")},initWidget:function(){this.canvas||(this.canvas=a("<canvas>")["prepend"==this.insertMode?"prependTo":"appendTo"](this.el)[0]);var d=this.canvas;if(d.width=this.size,d.height=this.size,this.ctx=d.getContext("2d"),window.devicePixelRatio>1){var c=window.devicePixelRatio;d.style.width=d.style.height=this.size+"px",d.width=d.height=this.size*c,this.ctx.scale(c,c)}},initFill:function(){function z(){var c=a("<canvas>")[0];c.width=k.size,c.height=k.size,c.getContext("2d").drawImage(m,0,0,x,x),k.arcFill=k.ctx.createPattern(c,"no-repeat"),k.drawFrame(k.lastFrameValue)}var k=this,f=this.fill,v=this.ctx,x=this.size;if(!f){throw Error("The fill is not specified!")}if("string"==typeof f&&(f={color:f}),f.color&&(this.arcFill=f.color),f.gradient){var y=f.gradient;if(1==y.length){this.arcFill=y[0]}else{if(y.length>1){for(var q=f.gradientAngle||0,w=f.gradientDirection||[x/2*(1-Math.cos(q)),x/2*(1+Math.sin(q)),x/2*(1+Math.cos(q)),x/2*(1-Math.sin(q))],p=v.createLinearGradient.apply(v,w),i=0;i<y.length;i++){var j=y[i],A=i/(y.length-1);a.isArray(j)&&(A=j[1],j=j[0]),p.addColorStop(A,j)}this.arcFill=p}}}if(f.image){var m;f.image instanceof Image?m=f.image:(m=new Image,m.src=f.image),m.complete?z():m.onload=z}},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(c){this.lastFrameValue=c,this.ctx.clearRect(0,0,this.size,this.size),this.drawEmptyArc(c),this.drawArc(c)},drawArc:function(f){if(0!==f){var h=this.ctx,d=this.radius,c=this.getThickness(),g=this.startAngle;h.save(),h.beginPath(),this.reverse?h.arc(d,d,d-c/2,g-2*Math.PI*f,g):h.arc(d,d,d-c/2,g,g+2*Math.PI*f),h.lineWidth=c,h.lineCap=this.lineCap,h.strokeStyle=this.arcFill,h.stroke(),h.restore()}},drawEmptyArc:function(f){var h=this.ctx,d=this.radius,c=this.getThickness(),g=this.startAngle;f<1&&(h.save(),h.beginPath(),f<=0?h.arc(d,d,d-c/2,0,2*Math.PI):this.reverse?h.arc(d,d,d-c/2,g,g-2*Math.PI*f):h.arc(d,d,d-c/2,g+2*Math.PI*f,g),h.lineWidth=c,h.strokeStyle=this.emptyFill,h.stroke(),h.restore())},drawAnimated:function(g){var d=this,c=this.el,f=a(this.canvas);f.stop(!0,!1),c.trigger("circle-animation-start"),f.css({animationProgress:0}).animate({animationProgress:1},a.extend({},this.animation,{step:function(e){var h=d.animationStartValue*(1-e)+g*e;d.drawFrame(h),c.trigger("circle-animation-progress",[e,h])}})).promise().always(function(){c.trigger("circle-animation-end")})},getThickness:function(){return a.isNumeric(this.thickness)?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(c){this.animation&&(this.animationStartValue=this.lastFrameValue),this.value=c,this.draw()}},a.circleProgress={defaults:b.prototype},a.easing.circleProgressEasing=function(c){return c<0.5?(c=2*c,0.5*c*c*c):(c=2-2*c,1-0.5*c*c*c)},a.fn.circleProgress=function(d,c){var f="circle-progress",g=this.data(f);if("widget"==d){if(!g){throw Error('Calling "widget" method on not initialized instance is forbidden')}return g.canvas}if("value"==d){if(!g){throw Error('Calling "value" method on not initialized instance is forbidden')}if("undefined"==typeof c){return g.getValue()}var h=arguments[1];return this.each(function(){a(this).data(f).setValue(h)})}return this.each(function(){var e=a(this),j=e.data(f),k=a.isPlainObject(d)?d:{};if(j){j.init(k)}else{var i=a.extend({},e.data());"string"==typeof i.fill&&(i.fill=JSON.parse(i.fill)),"string"==typeof i.animation&&(i.animation=JSON.parse(i.animation)),k=a.extend(i,k),k.el=e,j=new b(k),e.data(f,j)}})}});